# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets API

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é Google Sheets –∫ –±–æ—Ç—É.

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Google Cloud Console

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –ó–∞–ø–æ–º–Ω–∏—Ç–µ `Project ID` - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

## –®–∞–≥ 2: –í–∫–ª—é—á–µ–Ω–∏–µ Google Sheets API

1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞ –≤—ã–±–µ—Ä–∏—Ç–µ **APIs & Services** ‚Üí **Library**
2. –ù–∞–π–¥–∏—Ç–µ **Google Sheets API**
3. –ù–∞–∂–º–∏—Ç–µ **Enable**
4. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –≤–∫–ª—é—á–∏—Ç–µ **Google Drive API**

## –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ Service Account

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services** ‚Üí **Credentials**
2. –ù–∞–∂–º–∏—Ç–µ **Create Credentials** ‚Üí **Service Account**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Service account name**: `fitting-bot-sheets`
   - **Service account ID**: `fitting-bot-sheets`
   - **Role**: **Editor** (–∏–ª–∏ **Viewer** –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
4. –ù–∞–∂–º–∏—Ç–µ **Done**

## –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞

1. –í —Å–ø–∏—Å–∫–µ Service Accounts –Ω–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Keys**
4. –ù–∞–∂–º–∏—Ç–µ **Add Key** ‚Üí **Create new key**
5. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø **JSON**
6. –ù–∞–∂–º–∏—Ç–µ **Create**
7. –§–∞–π–ª `credentials.json` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç—Å—è

## –®–∞–≥ 5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ credentials –≤ –ø—Ä–æ–µ–∫—Ç

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É `config/`:
   ```bash
   cp ~/Downloads/your-project-id-xxxxx.json config/credentials.json
   ```

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —É–∫–∞–∑–∞–Ω –≤ `.env`:
   ```env
   GOOGLE_SHEETS_CREDENTIALS_PATH=config/credentials.json
   ```

## –®–∞–≥ 6: –°–æ–∑–¥–∞–Ω–∏–µ Google Sheets —Ç–∞–±–ª–∏—Ü—ã

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É –≤ [Google Sheets](https://docs.google.com/spreadsheets/)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã –∏–∑ URL:
   ```
   https://docs.google.com/spreadsheets/d/YOUR_SPREADSHEET_ID/edit
   ```
3. –î–æ–±–∞–≤—å—Ç–µ ID –≤ `.env`:
   ```env
   GOOGLE_SHEETS_SPREADSHEET_ID=YOUR_SPREADSHEET_ID
   ```

## –®–∞–≥ 7: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π `credentials.json`
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª–µ `client_email` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `fitting-bot-sheets@your-project.iam.gserviceaccount.com`)
3. –í Google Sheets –Ω–∞–∂–º–∏—Ç–µ **Share** (–ü–æ–¥–µ–ª–∏—Ç—å—Å—è)
4. –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç email —Å –ø—Ä–∞–≤–∞–º–∏ **Editor** (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∑–∞–ø–∏—Å—å) –∏–ª–∏ **Viewer** (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
5. –ù–∞–∂–º–∏—Ç–µ **Send**

## –®–∞–≥ 8: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

–°–æ–∑–¥–∞–π—Ç–µ 3 –ª–∏—Å—Ç–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ:

### –õ–∏—Å—Ç 1: –ö–∞—Ç–µ–≥–æ—Ä–∏–∏

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –ü–æ—Ä—è–¥–æ–∫ | –≠–º–æ–¥–∑–∏ |
|---|---|---|---|
| jackets_oversize | –ö—É—Ä—Ç–∫–∏ –æ–≤–µ—Ä—Å–∞–π–∑ | 1 | üß• |
| coats | –ü–∞–ª—å—Ç–æ | 2 | üß• |
| ... | ... | ... | ... |

**–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤:**
- **ID** - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ª–∞—Ç–∏–Ω–∏—Ü–µ–π, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
- **–ù–∞–∑–≤–∞–Ω–∏–µ** - –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –±–æ—Ç–µ
- **–ü–æ—Ä—è–¥–æ–∫** - –ø–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (1, 2, 3...)
- **–≠–º–æ–¥–∑–∏** - —ç–º–æ–¥–∑–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏

### –õ–∏—Å—Ç 2: –¢–æ–≤–∞—Ä—ã

| ID —Ç–æ–≤–∞—Ä–∞ | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Å—ã–ª–∫–∞ WB | –†–∞–∑–º–µ—Ä—ã | –ö–æ–ª–ª–∞–∂ | –§–æ—Ç–æ 1 | –§–æ—Ç–æ 2 | –§–æ—Ç–æ 3 | –§–æ—Ç–æ 4 | –ê–∫—Ç–∏–≤–µ–Ω | –¢–∞–±–ª–∏—Ü–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ |
|---|---|---|---|---|---|---|---|---|---|---|---|---|
| jacket_001 | jackets_oversize | –ö—É—Ä—Ç–∫–∞ —á–µ—Ä–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ... | https://wb.ru/ | XS,S,M,L,XL | url | url | url | url | url | –î–ê | outerwear_standard |

**–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤:**
- **ID —Ç–æ–≤–∞—Ä–∞** - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–æ–≤–∞—Ä–∞
- **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** - ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∏–∑ –ª–∏—Å—Ç–∞ "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏")
- **–ù–∞–∑–≤–∞–Ω–∏–µ** - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- **–û–ø–∏—Å–∞–Ω–∏–µ** - –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- **–°—Å—ã–ª–∫–∞ WB** - —Å—Å—ã–ª–∫–∞ –Ω–∞ Wildberries
- **–†–∞–∑–º–µ—Ä—ã** - –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (XS,S,M,L,XL)
- **–ö–æ–ª–ª–∞–∂** - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–ª–ª–∞–∂ –∏–∑ 4 —Ñ–æ—Ç–æ
- **–§–æ—Ç–æ 1-4** - —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ç–æ–≤–∞—Ä–∞
- **–ê–∫—Ç–∏–≤–µ–Ω** - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–≤–∞—Ä –≤ –±–æ—Ç–µ (–î–ê/–ù–ï–¢)
- **–¢–∞–±–ª–∏—Ü–∞ —Ä–∞–∑–º–µ—Ä–æ–≤** - ID —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–∑–º–µ—Ä–æ–≤ (–∏–∑ –ª–∏—Å—Ç–∞ "–†–∞–∑–º–µ—Ä—ã")

### –õ–∏—Å—Ç 3: –†–∞–∑–º–µ—Ä—ã

| ID —Ç–∞–±–ª–∏—Ü—ã | –†–∞–∑–º–µ—Ä | –†–æ—Å—Ç –º–∏–Ω | –†–æ—Å—Ç –º–∞–∫—Å | –ì—Ä—É–¥—å –º–∏–Ω | –ì—Ä—É–¥—å –º–∞–∫—Å | –¢–∞–ª–∏—è –º–∏–Ω | –¢–∞–ª–∏—è –º–∞–∫—Å | –ë–µ–¥—Ä–∞ –º–∏–Ω | –ë–µ–¥—Ä–∞ –º–∞–∫—Å |
|---|---|---|---|---|---|---|---|---|---|
| outerwear_standard | XS | 150 | 160 | 76 | 82 | 58 | 64 | 84 | 90 |
| outerwear_standard | S | 158 | 168 | 82 | 88 | 64 | 70 | 90 | 96 |
| ... | ... | ... | ... | ... | ... | ... | ... | ... | ... |

**–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤:**
- **ID —Ç–∞–±–ª–∏—Ü—ã** - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–∑–º–µ—Ä–æ–≤
- **–†–∞–∑–º–µ—Ä** - —Ä–∞–∑–º–µ—Ä (XS, S, M, L, XL, XXL)
- **–†–æ—Å—Ç –º–∏–Ω/–º–∞–∫—Å** - –¥–∏–∞–ø–∞–∑–æ–Ω —Ä–æ—Å—Ç–∞ –≤ —Å–º
- **–ì—Ä—É–¥—å –º–∏–Ω/–º–∞–∫—Å** - –¥–∏–∞–ø–∞–∑–æ–Ω –æ–±—Ö–≤–∞—Ç–∞ –≥—Ä—É–¥–∏ –≤ —Å–º
- **–¢–∞–ª–∏—è –º–∏–Ω/–º–∞–∫—Å** - –¥–∏–∞–ø–∞–∑–æ–Ω –æ–±—Ö–≤–∞—Ç–∞ —Ç–∞–ª–∏–∏ –≤ —Å–º
- **–ë–µ–¥—Ä–∞ –º–∏–Ω/–º–∞–∫—Å** - –¥–∏–∞–ø–∞–∑–æ–Ω –æ–±—Ö–≤–∞—Ç–∞ –±–µ–¥–µ—Ä –≤ —Å–º

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
   ```
   Google Sheets initialized successfully
   ```

3. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `credentials.json` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Service Account –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `GOOGLE_SHEETS_SPREADSHEET_ID`

## Troubleshooting

### –û—à–∏–±–∫–∞: "Permission denied"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Service Account email –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ

### –û—à–∏–±–∫–∞: "Credentials not found"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –≤ `GOOGLE_SHEETS_CREDENTIALS_PATH`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è

### –û—à–∏–±–∫–∞: "Spreadsheet not found"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `GOOGLE_SHEETS_SPREADSHEET_ID`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —É–¥–∞–ª–µ–Ω–∞

## Fallback –Ω–∞ –º–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ï—Å–ª–∏ Google Sheets –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑:
- `bot/mock_data/categories.py`
- `bot/mock_data/products.py`

–≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Google Sheets.
