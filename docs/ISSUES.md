# –°–ø–∏—Å–æ–∫ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–æ–ª–≥–æ–≤

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –≤ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–ë–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–ø—É—Å–∫)

### 1. –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π FSM –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏

- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `main.py`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–∏–∞–ª–æ–≥–æ–≤ (FSM) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `MemoryStorage` (`Dispatcher(storage=MemoryStorage())`). –≠—Ç–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ –∏–ª–∏ –ø–∞–¥–µ–Ω–∏–∏ –±–æ—Ç–∞.
- **–†–∏—Å–∫:** –ï—Å–ª–∏ –±–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è, –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –Ω–∞—Ö–æ–¥—è—â–∏–µ—Å—è –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –ª—é–±–æ–≥–æ –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–≤–≤–æ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ, –ø—Ä–∏–º–µ—Ä–∫–∞), –ø–æ—Ç–µ—Ä—è—é—Ç —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –Ω–µ —Å–º–æ–≥—É—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å. –≠—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –º–∞—Å—Å–æ–≤–æ–º—É –Ω–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤—É –∏ –æ—â—É—â–µ–Ω–∏—é, —á—Ç–æ –±–æ—Ç "—Å–ª–æ–º–∞–Ω".
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ó–∞–º–µ–Ω–∏—Ç—å `MemoryStorage` –Ω–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ) —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –°–∞–º—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è `aiogram` ‚Äî **`RedisStorage`**. –≠—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Redis –≤ `docker-compose.yml` –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `aiogram[redis]`.

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `openai`

- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `requirements.txt`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö —É–∫–∞–∑–∞–Ω–∞ –≤–µ—Ä—Å–∏—è `openai==0.28.1`. –≠—Ç–∞ –≤–µ—Ä—Å–∏—è —è–≤–ª—è–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–π, –±–æ–ª—å—à–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π API. –ö–æ–¥ –≤ `gpt_integration/gpt_client.py` —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–æ–∂–Ω—ã–µ –æ–±—Ö–æ–¥–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.
- **–†–∏—Å–∫:**
    - **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
    - **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –º–æ–≥—É—Ç –ø–µ—Ä–µ—Å—Ç–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å API –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç.
    - **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥:** –ö–æ–¥ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —É—Å–ª–æ–∂–Ω—è–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ.
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û–±–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ (`openai>=1.0.0`). –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ‚Äî —É–¥–∞–ª–∏—Ç—å –∏–∑ `gpt_integration/gpt_client.py` –≤–µ—Å—å –∫–æ–¥, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏, –∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–∫—É –¥–ª—è –Ω–æ–≤–æ–≥–æ SDK (`client = OpenAI()`).

---

## üü† –ü—Ä–æ–±–ª–µ–º—ã —Å—Ä–µ–¥–Ω–µ–π —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å)

### 1. –ù–µ–Ω–∞–¥–µ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `gpt_integration/photo_processing/validator.py`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ, —á—Ç–æ LLM –≤–µ—Ä–Ω–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç "yes" –∏–ª–∏ "no". –ú–æ–¥–µ–ª–∏ –Ω–µ –≤—Å–µ–≥–¥–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç —Ç–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –ª–æ–∂–Ω–æ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è–º (—Ö–æ—Ä–æ—à–µ–µ —Ñ–æ—Ç–æ –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ).
- **–†–∏—Å–∫:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç —Å–±–∏—Ç—ã —Å —Ç–æ–ª–∫—É, –ø–æ–ª—É—á–∞—è –æ—Ç–∫–∞–∑—ã –Ω–∞ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ, –ø–æ –∏—Ö –º–Ω–µ–Ω–∏—é, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏. –≠—Ç–æ —Å–Ω–∏–∑–∏—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏—é –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –ø—Ä–∏–º–µ—Ä–∫–∏.
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–º–ø—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏, —á—Ç–æ–±—ã –º–æ–¥–µ–ª—å –±—ã–ª–∞ –æ–±—è–∑–∞–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ **JSON**, –Ω–∞–ø—Ä–∏–º–µ—Ä: `{"valid": true, "reason": "OK"}` –∏–ª–∏ `{"valid": false, "reason": "–ß–µ–ª–æ–≤–µ–∫ –Ω–∞ —Ñ–æ—Ç–æ –Ω–µ –≤ –ø–æ–ª–Ω—ã–π —Ä–æ—Å—Ç"}`. –í –∫–æ–¥–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –ø–∞—Ä—Å–∏—Ç—å —ç—Ç–æ—Ç JSON. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫ –≤ API-–∫–ª–∏–µ–Ω—Ç–µ

- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `bot/utils/api_client.py`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ —Å FastAPI-–±—ç–∫–µ–Ω–¥–æ–º –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ API –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω) –∏ –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–∞, –æ—Ç–ª–∏—á–Ω—ã–µ –æ—Ç 200.
- **–†–∏—Å–∫:** –õ—é–±–æ–π —Å–±–æ–π –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ FastAPI-—Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–º—É –∏—Å–∫–ª—é—á–µ–Ω–∏—é –≤ –±–æ—Ç–µ, –∏ –æ–Ω "—É–ø–∞–¥–µ—Ç" –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ—Ç–≤–µ—Ç–∏–≤ –æ—à–∏–±–∫–æ–π –∏–ª–∏ –Ω–µ –æ—Ç–≤–µ—Ç–∏–≤ –≤–æ–≤—Å–µ.
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤ –º–µ—Ç–æ–¥—ã `ApiClient` –±–ª–æ–∫–∏ `try...except` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `aiohttp.ClientConnectorError`). –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ 5xx —Å–ª–µ–¥—É–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `None` –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –æ—à–∏–±–∫–∏, —á—Ç–æ–±—ã —Ö–µ–Ω–¥–ª–µ—Ä—ã –±–æ—Ç–∞ –º–æ–≥–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ "–°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ".

---

## üü° –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –°–ª–∏—à–∫–æ–º –æ—Ç–∫—Ä—ã—Ç–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ CORS

- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `api/main.py`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö CORS —É–∫–∞–∑–∞–Ω–æ `allow_origins=["*"]`, —á—Ç–æ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ API —Å –∞–±—Å–æ–ª—é—Ç–Ω–æ –ª—é–±–æ–≥–æ —Å–∞–π—Ç–∞.
- **–†–∏—Å–∫:** –ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º API –±—É–¥–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω –∏–ª–∏ –≤ –Ω–µ–º –ø–æ—è–≤—è—Ç—Å—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —ç—Ç–æ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä –¥–ª—è –∞—Ç–∞–∫ (CSRF).
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–∞–∂–µ –µ—Å–ª–∏ —Å–µ–π—á–∞—Å API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–æ—Ç–æ–º, —Ö–æ—Ä–æ—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤. –ï—Å–ª–∏ –∂–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞, —Å–ª–µ–¥—É–µ—Ç —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã.

### 2. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ FSM –∏ –ë–î

- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `bot/handlers/tryon.py`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (`last_result_path`) —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM (`state.update_data`). –û–¥–Ω–∞–∫–æ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç" —ç—Ç–æ—Ç –ø—É—Ç—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `api_client.get_tryon_history`.
- **–†–∏—Å–∫:** –•–æ—Ç—è —Å–µ–π—á–∞—Å —ç—Ç–æ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç —è–≤–Ω—ã—Ö –±–∞–≥–æ–≤, —Ç–∞–∫–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –ª–æ–≥–∏–∫–∞ —É—Å–ª–æ–∂–Ω–∏—Ç—Å—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å—Ç–∏—Ç –¥–≤–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏–º–µ—Ä–∫–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã. –î–ª—è –¥–µ–π—Å—Ç–≤–∏—è "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç", –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é, –Ω–∞–¥–µ–∂–Ω–µ–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å ID –ø—Ä–∏–º–µ—Ä–∫–∏ –≤ `callback_data` –∏ –ø–æ –Ω–µ–º—É –ø–æ–ª—É—á–∞—Ç—å –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –∏–∑ –ë–î, –Ω–µ –ø–æ–ª–∞–≥–∞—è—Å—å –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM.
