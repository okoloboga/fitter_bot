# ЭТАП 0: ШАБЛОН ИНТЕРФЕЙСА

## ЦЕЛЬ ЭТАПА
Создать визуальный и навигационный прототип бота без реальной функциональности. Пользователь сможет увидеть структуру бота, все экраны, кнопки и переходы между разделами. Все данные будут моковыми (заглушками).

---

## 1. ОБЩАЯ АРХИТЕКТУРА БОТА

### 1.1 Технологический стек
- **Telegram Bot**: Aiogram 3.x (асинхронная библиотека)
- **Структура проекта**: модульная архитектура с разделением на handlers, keyboards, states
- **Конфигурация**: переменные окружения через .env файл
- **Данные**: жестко закодированные моковые данные в Python-структурах

### 1.2 Структура проекта
```
fitting_bot/
├── bot/
│   ├── handlers/          # Обработчики команд и callback
│   │   ├── start.py       # Команда /start и главное меню
│   │   ├── catalog.py     # Навигация по каталогу
│   │   ├── favorites.py   # Раздел избранного
│   │   ├── measurements.py # Раздел параметров
│   │   └── admin.py       # Административные команды
│   ├── keyboards/         # Клавиатуры и inline-кнопки
│   │   ├── main_menu.py   # Главное меню
│   │   ├── catalog.py     # Кнопки каталога
│   │   └── product.py     # Кнопки карточки товара
│   ├── states/            # FSM состояния
│   │   └── measurements.py # Состояния ввода параметров
│   └── mock_data/         # Моковые данные
│       ├── categories.py  # Категории товаров
│       └── products.py    # Товары
├── main.py                # Точка входа
└── .env                   # Конфигурация
```

---

## 2. КОМАНДА /START И ГЛАВНОЕ МЕНЮ

### 2.1 Команда /start

**Поведение при первом запуске:**
- Бот отправляет приветственное сообщение
- Текст приветствия описывает возможности бота
- Tone of voice: дружелюбный, молодежный, на "ты"
- Автоматически показывается главное меню

**Текст приветствия (примерный):**
```
Привет! 👋

Я помогу тебе подобрать идеальную одежду!

Что я умею:
🛍 Показать каталог товаров
📐 Подобрать размер по твоим параметрам
👗 Примерить одежду на твое фото (скоро!)
⭐️ Сохранить понравившиеся товары

Давай начнем!
```

**Повторный запуск /start:**
- Показывается краткое сообщение: "С возвращением! 😊"
- Отображается главное меню

### 2.2 Главное меню

**Структура меню (ReplyKeyboard):**
```
┌─────────────────────────────┐
│  🛍 Каталог                  │
│  ⭐️ Избранное                │
│  📐 Мои параметры            │
│  ℹ️ О боте                   │
└─────────────────────────────┘
```

**Описание кнопок:**
- **🛍 Каталог** - открывает список категорий товаров
- **⭐️ Избранное** - показывает избранные товары (пока заглушка)
- **📐 Мои параметры** - раздел ввода параметров тела
- **ℹ️ О боте** - информация о возможностях бота

### 2.3 Раздел "О боте"

**Содержимое:**
- Подробное описание функций бота
- Информация о том, как пользоваться ботом
- Краткая инструкция по каждой функции
- Кнопка "◀️ Назад" для возврата в главное меню

**Текст (примерный):**
```
ℹ️ О боте

Этот бот создан для удобного выбора одежды!

🛍 Каталог
Просматривай товары по категориям, листай карточки с фото и описаниями

📐 Подбор размера
Укажи свои параметры один раз, и мы будем рекомендовать подходящий размер для каждого товара

⭐️ Избранное
Сохраняй понравившиеся товары, чтобы вернуться к ним позже

👗 Примерка (скоро!)
Загрузи свое фото и посмотри, как на тебе будет смотреться выбранная одежда

Приятного шопинга! ✨
```

---

## 3. КАТАЛОГ И НАВИГАЦИЯ

### 3.1 Моковые данные

**Категории (8 категорий верхней одежды + штаны):**
1. 🧥 Куртки оверсайз
2. 🧥 Пальто
3. 🧥 Пуховики
4. 🧥 Плащи
5. 🧥 Бомберы
6. 🧥 Жилеты
7. 🧥 Ветровки
8. 🧥 Парки
9. 👖 Штаны

**Товары (по 3-5 товаров в каждой категории):**
- Каждый товар содержит:
  - product_id (например: "jacket_001")
  - category (категория)
  - name (название)
  - description (описание, 2-3 предложения)
  - available_sizes (список размеров: XS, S, M, L, XL)
  - wb_link (моковая ссылка на Wildberries)
  - collage_url (заглушка - можно использовать любое публичное изображение одежды)
  - photos (4 фото - заглушки)

### 3.2 Выбор категории

**Процесс:**
- Пользователь нажимает "🛍 Каталог" в главном меню
- Открывается сообщение со списком категорий в виде inline-кнопок
- Каждая кнопка содержит эмодзи и название категории

**Структура inline-клавиатуры:**
```
┌─────────────────┬─────────────────┐
│  🧥 Куртки      │  🧥 Пальто      │
│    оверсайз     │                 │
├─────────────────┼─────────────────┤
│  🧥 Пуховики    │  🧥 Плащи       │
├─────────────────┼─────────────────┤
│  🧥 Бомберы     │  🧥 Жилеты      │
├─────────────────┼─────────────────┤
│  🧥 Ветровки    │  🧥 Парки       │
├─────────────────┼─────────────────┤
│      👖 Штаны                      │
├────────────────────────────────────┤
│          ◀️ В главное меню          │
└────────────────────────────────────┘
```

**Текст сообщения:**
```
🛍 Каталог

Выбери категорию:
```

**Callback data формат:**
- `category:category_id`
- Пример: `category:jackets_oversize`

### 3.3 Просмотр товаров в категории

**Процесс:**
- Пользователь выбирает категорию
- Отображается первый товар из категории
- Карточка товара показывается с пагинацией

**Карточка товара включает:**
1. **Изображение** - коллаж из 4 фото (или одно фото)
2. **Текстовая информация:**
   - Название товара
   - Описание (2-3 предложения)
   - Доступные размеры: XS, S, M, L, XL
   - Рекомендуемый размер (если параметры указаны) или напоминание указать параметры

**Пример текста карточки:**
```
🧥 Куртка оверсайз черная

Стильная куртка оверсайз из плотной ткани. Идеально подходит для прохладной погоды. Свободный крой, карманы на молнии.

Размеры: XS, S, M, L, XL

📐 Укажи свои параметры, чтобы получить рекомендацию по размеру

Товар 1 из 5
```

**Inline-клавиатура под карточкой:**
```
┌────────────────────────────────────┐
│       ⭐️ В избранное                │
├────────────────────────────────────┤
│     🔗 Открыть на Wildberries      │
├────────────────────────────────────┤
│     📸 Посмотреть все фото          │
├────────────────────────────────────┤
│     👗 Примерить (скоро!)           │
├─────────────────┬──────────────────┤
│   ◀️ (1/5)      │      ▶️          │
├─────────────────┴──────────────────┤
│         🔙 К категориям             │
└────────────────────────────────────┘
```

**Callback data для кнопок:**
- `fav:add:product_id` - добавить в избранное
- `wb_link:product_id` - открыть ссылку на WB (URL кнопка)
- `photos:product_id` - показать все фото
- `tryon:product_id` - примерить (заглушка)
- `nav:category_id:index:prev` - предыдущий товар
- `nav:category_id:index:next` - следующий товар
- `back:categories` - вернуться к категориям

### 3.4 Пагинация товаров

**Логика:**
- Навигация через кнопки "◀️" и "▶️"
- В центре отображается счетчик: "(1/5)" - текущий товар из общего количества
- При нажатии кнопок навигации сообщение редактируется (не создается новое)
- На первом товаре кнопка "◀️" неактивна или зацикливает на последний
- На последнем товаре кнопка "▶️" неактивна или зацикливает на первый

**Состояние хранится в callback data:**
- Формат: `nav:category_id:current_index:action`
- Пример: `nav:jackets:0:next` - следующий товар в категории куртки, текущий индекс 0

### 3.5 Просмотр всех фото товара

**Процесс:**
- Пользователь нажимает "📸 Посмотреть все фото"
- Бот отправляет медиа-группу из 4 фотографий (заглушки)
- После медиа-группы отправляется сообщение с кнопкой возврата

**Кнопка возврата:**
```
┌────────────────────────────────────┐
│       ◀️ Вернуться к товару         │
└────────────────────────────────────┘
```

**Callback data:**
- `back:product:product_id:category_id:index`

**Примечание для этапа 0:**
- Можно использовать одно и то же изображение 4 раза
- Или использовать любые публично доступные изображения одежды

---

## 4. ИЗБРАННОЕ

### 4.1 Добавление в избранное

**Процесс:**
- Пользователь просматривает карточку товара
- Нажимает кнопку "⭐️ В избранное"
- Кнопка меняется на "❌ Убрать из избранного"
- Показывается всплывающее уведомление (answer callback query): "Товар добавлен в избранное ⭐️"

**Хранение данных:**
- На этапе 0 данные хранятся в памяти (словарь Python)
- Структура: `{user_id: [product_id_1, product_id_2, ...]}`
- При перезапуске бота данные сбрасываются

### 4.2 Удаление из избранного

**Процесс:**
- Пользователь нажимает "❌ Убрать из избранного"
- Кнопка меняется обратно на "⭐️ В избранное"
- Уведомление: "Товар удален из избранного"

### 4.3 Просмотр избранного

**Процесс:**
- Пользователь нажимает "⭐️ Избранное" в главном меню
- Если избранное пустое, показывается сообщение-заглушка
- Если есть товары, отображаются карточки товаров с пагинацией (аналогично каталогу)

**Сообщение при пустом избранном:**
```
⭐️ Избранное

Твое избранное пока пусто. Добавь понравившиеся товары из каталога! 💫
```

**Кнопка:**
```
┌────────────────────────────────────┐
│       🛍 Перейти в каталог          │
└────────────────────────────────────┘
```

**Если есть товары:**
- Отображаются карточки товаров (как в каталоге)
- Доступна пагинация
- Кнопка "❌ Убрать из избранного" вместо "⭐️ В избранное"
- Кнопка "🔙 В главное меню" для возврата

---

## 5. ПАРАМЕТРЫ ПОЛЬЗОВАТЕЛЯ

### 5.1 Раздел "Мои параметры"

**Первый вход (параметры не указаны):**
- Пользователь нажимает "📐 Мои параметры" в главном меню
- Показывается информационное сообщение с предложением ввести параметры

**Текст сообщения:**
```
📐 Мои параметры

Укажи свои параметры, чтобы мы могли рекомендовать подходящий размер для каждого товара!

Нам понадобятся:
• Рост (в сантиметрах)
• Обхват груди (в сантиметрах)
• Обхват талии (в сантиметрах)
• Обхват бедер (в сантиметрах)

Это займет меньше минуты! ⏱
```

**Кнопки:**
```
┌────────────────────────────────────┐
│       ✏️ Указать параметры          │
├────────────────────────────────────┤
│       ◀️ В главное меню             │
└────────────────────────────────────┘
```

### 5.2 Пошаговый ввод параметров

**Использование FSM (Finite State Machine):**
- Бот управляет состояниями диалога
- Состояния: WaitingHeight, WaitingChest, WaitingWaist, WaitingHips
- Переход между состояниями происходит последовательно

**Шаг 1: Рост**
```
Сообщение:
"Укажи свой рост в сантиметрах (например: 165)"

Inline-кнопка:
┌────────────────────────────────────┐
│           ❌ Отмена                 │
└────────────────────────────────────┘
```

**Валидация (на этапе 0 - базовая):**
- Проверка, что введено число
- Диапазон: 140-200 см
- При ошибке: "Пожалуйста, введи корректное значение роста от 140 до 200 см"

**Шаг 2: Обхват груди**
```
Сообщение:
"Отлично! Теперь укажи обхват груди в сантиметрах (например: 85)"

Inline-кнопка: ❌ Отмена
```

**Валидация:**
- Диапазон: 70-130 см

**Шаг 3: Обхват талии**
```
Сообщение:
"Супер! Теперь обхват талии в сантиметрах (например: 65)"

Inline-кнопка: ❌ Отмена
```

**Валидация:**
- Диапазон: 50-110 см

**Шаг 4: Обхват бедер**
```
Сообщение:
"Последний параметр! Укажи обхват бедер в сантиметрах (например: 95)"

Inline-кнопка: ❌ Отмена
```

**Валидация:**
- Диапазон: 70-140 см

### 5.3 Сохранение параметров

**После завершения ввода:**
- Параметры сохраняются в памяти (словарь Python)
- Структура: `{user_id: {"height": 165, "chest": 85, "waist": 65, "hips": 95}}`
- Показывается сводка

**Сообщение с сохраненными параметрами:**
```
✨ Отлично! Твои параметры сохранены:

• Рост: 165 см
• Обхват груди: 85 см
• Обхват талии: 65 см
• Обхват бедер: 95 см

Теперь мы будем показывать рекомендуемый размер для каждого товара!
```

**Кнопки:**
```
┌────────────────────────────────────┐
│       ✏️ Изменить параметры         │
├────────────────────────────────────┤
│       ◀️ В главное меню             │
└────────────────────────────────────┘
```

### 5.4 Просмотр и изменение параметров

**Повторный вход в раздел (параметры уже указаны):**
- Показываются текущие параметры
- Доступны кнопки для изменения

**Изменение параметров:**
- Пользователь нажимает "✏️ Изменить параметры"
- Показываются кнопки для выбора конкретного параметра

**Выбор параметра для изменения:**
```
┌────────────────┬───────────────────┐
│  📏 Рост       │  👚 Грудь         │
├────────────────┼───────────────────┤
│  👖 Талия      │  🍑 Бедра         │
├────────────────┴───────────────────┤
│         ◀️ Назад                    │
└────────────────────────────────────┘
```

**После выбора:**
- Запускается ввод только этого параметра
- После ввода показывается обновленная сводка

### 5.5 Отображение рекомендации в карточке товара

**Логика (на этапе 0 - заглушка):**
- Если параметры НЕ указаны: "📐 Укажи свои параметры, чтобы получить рекомендацию по размеру"
- Если параметры указаны: "✅ Рекомендуемый размер: M" (фиксированное значение M для всех товаров)

**Примечание:**
- Реальный алгоритм подбора размера будет реализован на этапе 1
- На этапе 0 достаточно показать, как будет выглядеть рекомендация

---

## 6. АДМИНИСТРАТИВНЫЕ ФУНКЦИИ (ЗАГЛУШКИ)

### 6.1 Команда /admin_stats

**Процесс:**
- Любой пользователь может ввести команду /admin_stats
- На этапе 0 не проверяется, является ли пользователь администратором
- Показывается моковая статистика

**Сообщение со статистикой:**
```
📊 Статистика бота

👥 Пользователи:
Всего: 127
Новых за сегодня: 5
Новых за 7 дней: 23
Активных за 7 дней: 89

👗 Примерки:
Всего: 0 (функция пока недоступна)

🔥 ТОП-3 категорий:
1. Куртки оверсайз - 45 просмотров
2. Пальто - 32 просмотра
3. Штаны - 28 просмотров

⭐️ В избранном:
Всего товаров добавлено: 156
```

**Кнопки:**
```
┌────────────────────────────────────┐
│           🔄 Обновить               │
├────────────────────────────────────┤
│       ◀️ В главное меню             │
└────────────────────────────────────┘
```

**Примечание:**
- Все цифры статичные (жестко закодированные)
- Кнопка "Обновить" просто обновляет сообщение с теми же данными

---

## 7. ДОПОЛНИТЕЛЬНЫЕ ЭЛЕМЕНТЫ ИНТЕРФЕЙСА

### 7.1 Кнопка "Примерить" (заглушка)

**Поведение:**
- В карточке товара есть кнопка "👗 Примерить (скоро!)"
- При нажатии показывается сообщение

**Текст сообщения:**
```
👗 Примерка одежды

Эта функция скоро будет доступна! 🚀

Ты сможешь:
• Загрузить свое фото
• Увидеть, как на тебе будет смотреться выбранный товар
• Сохранить результат примерки

Следи за обновлениями! ✨
```

**Кнопка:**
```
┌────────────────────────────────────┐
│       ◀️ Вернуться к товару         │
└────────────────────────────────────┘
```

### 7.2 Ссылки на Wildberries

**Формат:**
- URL-кнопка (открывается в браузере)
- Моковая ссылка: `https://www.wildberries.ru/` (одинаковая для всех товаров на этапе 0)

### 7.3 Обработка неизвестных команд

**Поведение:**
- Если пользователь отправляет неизвестную команду или текст вне контекста FSM
- Показывается дружелюбное сообщение

**Текст:**
```
Я не понял эту команду 😅

Воспользуйся меню ниже или введи /start для перезапуска бота
```

### 7.4 Кнопка "Отмена" во время ввода

**Поведение:**
- Во время пошагового ввода параметров доступна кнопка "❌ Отмена"
- При нажатии FSM сбрасывается
- Показывается сообщение: "Ввод параметров отменен"
- Возврат в главное меню

---

## 8. TONE OF VOICE И СООБЩЕНИЯ

### 8.1 Принципы общения

**Характеристики:**
- Дружелюбный и молодежный стиль
- Обращение на "ты"
- Использование эмодзи для визуального оформления
- Позитивный и поддерживающий тон
- Короткие и понятные сообщения

### 8.2 Примеры формулировок

**Позитивные сценарии:**
- "Отлично!" вместо "Хорошо"
- "Супер!" вместо "Принято"
- "Ура! Параметры сохранены! ✨" вместо "Параметры сохранены"

**Ошибки:**
- "Упс, что-то пошло не так 😅" вместо "Произошла ошибка"
- "Попробуй еще раз!" вместо "Повторите попытку"

**Действия:**
- "Давай начнем!" вместо "Начать работу"
- "Выбери категорию:" вместо "Выберите категорию"

### 8.3 Использование эмодзи

**Стандартные эмодзи для разделов:**
- 🛍 Каталог
- ⭐️ Избранное
- 📐 Параметры
- 👗 Примерка
- ℹ️ Информация
- 🔙 Назад
- ◀️▶️ Навигация
- ✅ Успех
- ❌ Отмена/Удаление
- 📸 Фото
- 🔗 Ссылка

---

## 9. НАВИГАЦИЯ И UX

### 9.1 Принципы навигации

**Всегда есть путь назад:**
- В каждом разделе есть кнопка возврата
- "◀️ Назад" или "🔙 В главное меню"
- Никогда не оставляем пользователя в тупике

**Минимум текстового ввода:**
- Максимальное использование кнопок
- Текстовый ввод только для параметров тела
- Все остальное - через inline-кнопки

**Логичная структура:**
- Главное меню → Раздел → Детали → Возврат
- Breadcrumbs в сложных разделах (например: "Каталог → Куртки → Товар 2 из 5")

### 9.2 Редактирование сообщений

**Принцип:**
- Сообщения с inline-кнопками редактируются, а не создаются заново
- Это касается: пагинации товаров, изменения статуса избранного, навигации по категориям

**Исключения (новые сообщения):**
- Просмотр всех фото (медиа-группа)
- Всплывающие уведомления (answer callback query)
- Начало нового раздела

### 9.3 Состояние интерфейса

**Адаптивность:**
- Кнопки меняются в зависимости от состояния (избранное/не избранное)
- Отображается разная информация в зависимости от наличия параметров
- Показываются релевантные подсказки

---

## 10. ТЕХНИЧЕСКИЕ ТРЕБОВАНИЯ

### 10.1 Обработка callback-запросов

**Формат callback_data:**
- Максимальная длина: 64 байта
- Формат: `action:param1:param2:param3`
- Примеры:
  - `category:jackets`
  - `fav:add:jacket_001`
  - `nav:jackets:2:next`
  - `back:categories`

**Обработка:**
- Парсинг callback_data по разделителю `:`
- Определение action и выполнение соответствующей логики
- Всегда отвечать на callback (answer callback query), чтобы убрать индикатор загрузки

### 10.2 FSM (Машина состояний)

**Использование:**
- Для пошагового ввода параметров
- Состояния хранятся в памяти (на этапе 0)
- Возможность отмены на любом шаге

**Состояния:**
```python
class MeasurementStates:
    waiting_height
    waiting_chest
    waiting_waist
    waiting_hips
```

### 10.3 Хранение данных в памяти

**Структуры данных:**
```python
# Параметры пользователей
user_measurements = {
    user_id: {
        "height": 165,
        "chest": 85,
        "waist": 65,
        "hips": 95
    }
}

# Избранное
user_favorites = {
    user_id: ["jacket_001", "coat_003", "pants_002"]
}
```

**Примечание:**
- Данные не сохраняются при перезапуске
- При перезапуске бота все данные сбрасываются
- Для пользователя это означает, что при перезапуске бота нужно заново вводить параметры

### 10.4 Обработка ошибок

**Базовая обработка:**
- Try-except блоки для предотвращения падения бота
- Логирование ошибок в консоль
- Пользователю показывается дружелюбное сообщение при ошибке

**Сообщение при ошибке:**
```
Упс, что-то пошло не так 😅

Попробуй еще раз или вернись в главное меню
```

---

## 11. КРИТЕРИИ ПРИЕМКИ ЭТАПА 0

### 11.1 Функциональные требования

**Обязательно реализовано:**
- ✅ Команда /start с приветственным сообщением
- ✅ Главное меню с 4 кнопками
- ✅ Раздел "О боте" с информацией
- ✅ Список категорий (8-9 категорий)
- ✅ Просмотр товаров с пагинацией (минимум 3 товара в каждой категории)
- ✅ Карточка товара со всеми элементами
- ✅ Добавление/удаление из избранного (с сохранением в памяти)
- ✅ Просмотр избранного
- ✅ Пошаговый ввод параметров с валидацией
- ✅ Просмотр и изменение параметров
- ✅ Отображение рекомендации размера (заглушка)
- ✅ Команда /admin_stats с моковой статистикой
- ✅ Заглушка для функции примерки

### 11.2 Качественные требования

**Пользовательский опыт:**
- ✅ Навигация интуитивно понятна
- ✅ Всегда есть кнопка возврата
- ✅ Сообщения дружелюбные и понятные
- ✅ Эмодзи используются уместно
- ✅ Нет "мертвых зон" в интерфейсе

**Техническое качество:**
- ✅ Бот не падает при некорректном вводе
- ✅ Callback-запросы обрабатываются корректно
- ✅ FSM работает правильно (переходы между состояниями)
- ✅ Сообщения редактируются, а не создаются заново (где это нужно)

### 11.3 Проверочный чек-лист

**Тестовые сценарии:**
1. Запустить бота командой /start ✅
2. Пройти все пункты главного меню ✅
3. Просмотреть несколько категорий ✅
4. Пролистать товары в категории (навигация) ✅
5. Добавить товар в избранное ✅
6. Удалить товар из избранного ✅
7. Просмотреть раздел избранного ✅
8. Ввести параметры (полный цикл) ✅
9. Изменить один параметр ✅
10. Отменить ввод параметров ✅
11. Нажать на кнопку "Примерить" (заглушка) ✅
12. Вызвать /admin_stats ✅
13. Проверить все кнопки "Назад" ✅

---

## 12. ЧТО НЕ ВХОДИТ В ЭТАП 0

**Не реализуется:**
- ❌ Интеграция с Google Sheets (все данные - моковые в коде)
- ❌ База данных PostgreSQL (данные в памяти)
- ❌ Реальный алгоритм подбора размеров (только заглушка)
- ❌ FastAPI backend (не требуется на этом этапе)
- ❌ Загрузка и обработка фото
- ❌ Интеграция с Gemini API
- ❌ Примерка одежды
- ❌ Административная панель с реальной статистикой
- ❌ Сохранение данных между перезапусками

**Будет реализовано на следующих этапах:**
- Этап 1: Интеграция с Google Sheets, база данных, реальный подбор размеров
- Этап 2: AI-примерка, загрузка фото, интеграция с Gemini

---

## 13. ИТОГИ ЭТАПА 0

### 13.1 Что получится в результате

**Визуальный и навигационный прототип:**
- Полностью работающий интерфейс бота
- Все экраны и переходы между ними
- Возможность "потрогать" бота и оценить UX

**Демонстрация для заказчика:**
- Заказчик может увидеть, как будет выглядеть финальный бот
- Возможность дать обратную связь по интерфейсу
- Корректировка навигации и формулировок до реализации сложной логики

**Техническая основа:**
- Готовая структура проекта
- Обработчики для всех основных команд
- Шаблоны клавиатур
- FSM для диалогов

### 13.2 Время разработки

**Примерная оценка:**
- 2-4 дня для опытного разработчика
- Зависит от скорости подготовки моковых данных и изображений

### 13.3 Следующие шаги

**После завершения этапа 0:**
1. Демонстрация заказчику
2. Сбор обратной связи по интерфейсу
3. Внесение корректировок (если нужно)
4. Переход к этапу 1: реализация реальной функциональности
